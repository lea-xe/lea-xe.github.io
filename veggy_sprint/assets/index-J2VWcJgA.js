import{p as e,P as t}from"./phaser-gBk57k7n.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class a extends e.Scene{constructor(){super("Boot")}preload(){this.load.image("background","assets/sky.png"),this.load.image("favicon","favicon.png")}create(){this.scene.start("Preloader")}}let s={maxHealth:5,startHealth:1,width:1024,height:768,maxJump:2,jumpForce:-1200,lastItemPlacementTime:0,scoreUpdateTime:0,lastMonsterSpawnTime:0,firstTwoHealthys:2,floorHeight:140,healthrechargeMin:5,maxMonsterhits:2};class i extends t.Scene{constructor(){super("Game")}preload(){this.load.image("favicon","/favicon.png"),this.anims.create({key:"run",frames:this.anims.generateFrameNumbers("player",{start:0,end:9}),frameRate:15,repeat:-1}),this.anims.create({key:"exist",frames:this.anims.generateFrameNumbers("monster",{start:0,end:2}),frameRate:6,repeat:-1})}create(){s.gameSpeedStart=400,s.lastItemPlacementTime=0,this.firstTwoHealthys=0,this.gameScore=0,this.monsterhits=0,this.healthyFood=["apple","aubergine","avocado","birne","brocolli","carrot","strawberry","orange"],this.unHealthyFood=["burger","cookie","doughnut","icecream","pizza","pommes"],this.add.image(512,384,"background"),this.player=this.physics.add.sprite(100,100,"player").setCollideWorldBounds(!0),this.player.setGravityY(3e3),this.player.setDepth(2),this.player.health=s.startHealth,this.player.healthyscore=0,this.monsterGroup=this.add.group({}),this.input.keyboard.on("keydown-SPACE",(function(){this.player.body.touching.down&&(this.player.jumps=0),this.jump()}),this),this.platformGroup=this.physics.add.staticGroup(),this.platformGroup.platformamout=1,this.physics.add.collider(this.player,this.platformGroup,(()=>{this.player.anims.isPlaying||this.player.anims.play("run")}),null,this),this.addPlatform(this.game.config.width,this.game.config.width/2,this.game.config.height-128),this.addPlatform(this.game.config.width,this.game.config.width+this.game.config.width/2,this.game.config.height-128),this.addPlatform(this.game.config.width,2*this.game.config.width+this.game.config.width/2,this.game.config.height-128),this.healthyGroup=this.add.group({removeCallback:function(e){e.scene.healthyPool.add(e)}}),this.healthyPool=this.add.group({removeCallback:function(e){e.scene.healthyGroup.add(e)}}),this.physics.add.overlap(this.player,this.healthyGroup,(function(e,t){t.collected||(t.collected=!0,this.tweens.add({targets:t,y:t.y-100,alpha:0,duration:800,ease:"Cubic.easeOut",callbackScope:this,onComplete:function(){t.destroy()}}),this.gameScore+=20,this.player.healthyscore<=s.healthrechargeMin?(this.player.healthyscore+=1,this.sound.play("eat",{volume:.5})):this.player.health<s.maxHealth&&(this.player.health+=1,this.sound.play("extralife",{volume:.5}),this.player.healthyscore=0))}),null,this),this.unHealthyGroup=this.add.group({removeCallback:function(e){e.scene.unHealthyPool.add(e)}}),this.unHealthyPool=this.add.group({removeCallback:function(e){e.scene.unHealthyGroup.add(e)}}),this.physics.add.overlap(this.player,this.unHealthyGroup,(function(e,t){t.collected||(t.collected=!0,this.tweens.add({targets:t,y:t.y-100,alpha:0,duration:800,ease:"Cubic.easeOut",callbackScope:this,onComplete:function(){t.destroy()}}),0==this.player.healthyscore&&this.player.health>1?(this.player.health-=1,this.player.healthyscore=6,this.sound.play("takedamage",{volume:.5,rate:1.5})):1==this.player.health&&0==this.player.healthyscore?(this.player.health=0,this.sound.play("takedamage",{volume:.5,rate:1.5})):(this.player.healthyscore-=1,this.sound.play("takedamage",{volume:.5,rate:1.5})))}),null,this),this.lives=this.add.text(50,50,this.player.health,{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5);const e=this.add.image(90,50,"heart");e.setScale(.35),e.setOrigin(.5),this.healthyscore=this.add.text(150,50,this.player.healthyscore,{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.score=this.add.text(s.width-100,50,this.gameScore,{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.8,.5);const t=this.add.image(190,47,"strawberry");t.setScale(.3),t.setOrigin(.5)}createHealthyItem(e){this.healthyGroup.add(e)}createUnHealthyItem(e){this.unHealthyGroup.add(e)}createItem(e,a,i,o){if("healthy"==o)var r=this.healthyFood[t.Math.Between(0,this.healthyFood.length-1)];else"unHealthy"==o&&(r=this.unHealthyFood[t.Math.Between(0,this.unHealthyFood.length-1)]);const h=this.physics.add.sprite(a,i,r);h.setInteractive(),h.setScale(.5),h.setImmovable(!0),h.setDepth(2),h.setVelocityX(-1*s.gameSpeedStart),"healthy"==o||this.firstTwoHealthys<s.firstTwoHealthys?(this.firstTwoHealthys+=1,this.createHealthyItem(h)):"unHealthy"==o&&this.createUnHealthyItem(h),this.tweens.add({targets:h,y:i+20*Math.random()-5,duration:t.Math.Between(700,1e3),yoyo:!0,repeat:-1})}update(){this.player.health<=0&&(this.sound.play("gameover",{volume:.5}),this.scene.start("GameOver",{score:this.gameScore}),this.gameScore>localStorage.getItem("highscore")&&localStorage.setItem("highscore",this.gameScore)),this.lives.setText(this.player.health),this.healthyscore.setText(this.player.healthyscore),this.score.setText(`Current Score: ${this.gameScore}`);const e=t.Math.Between(1e4,2e4);if(this.time.now-s.lastMonsterSpawnTime>=e&&(this.spawnMonster(),s.lastMonsterSpawnTime=this.time.now),this.healthyGroup.getChildren().forEach((function(e){e.x<-e.displayWidth/2&&e.destroy()}),this),this.unHealthyGroup.getChildren().forEach((function(e){e.x<-e.displayWidth/2&&e.destroy()}),this),this.monsterGroup.getChildren().forEach((function(e){const t=2024-e.x;t>0&&t<2024&&!0!==e.soundPlayed?(e.soundPlayed=!0,this.sound.play("laughter",{volume:.5})):e.x<-e.displayWidth/2&&e.destroy()}),this),s.gameSpeedStart<3e3&&(s.gameSpeedStart+=.1),this.platformGroup.getChildren().forEach((e=>{if(e.body.setVelocityX(-s.gameSpeedStart),e.x<=-e.displayWidth/2){let t=Math.max(...this.platformGroup.getChildren().map((e=>e.x)));e.x=t+e.displayWidth}})),this.time.now-s.scoreUpdateTime>=500&&(this.gameScore+=1,s.scoreUpdateTime=this.time.now),this.time.now-s.lastItemPlacementTime>=t.Math.Between(5e3,1e4)/(s.gameSpeedStart/100)){let e=t.Math.Between(1,2);this.firstTwoHealthys<s.firstTwoHealthys&&(e=1),this.createItem(this.healthyGroup,1100,t.Math.Between(s.floorHeight,s.height-128),1==e?"healthy":"unHealthy"),s.lastItemPlacementTime=this.time.now}}jump(){this.player.jumps<s.maxJump&&(this.player.setVelocityY(s.jumpForce),this.player.jumps++)}addPlatform(e,a,i){let o;this.platformGroup.platformamout+=1;let r="ground_"+t.Math.Between(1,4);o=this.add.tileSprite(a,i||600,e||1024,256,r),this.physics.add.existing(o),o.body.setImmovable(!0),o.setDepth(2),o.body.setSize(1024,128),o.body.setOffset(0,128),o.body.setFriction(0),this.platformGroup.add(o),this.physics.add.collider(this.player,o,(()=>{this.player.anims.isPlaying||this.player.anims.play("run")}),null,this),this.physics.add.collider(this.monsterGroup,o,(()=>{}),null,this),console.log("Creating platform");let h=s.gameSpeedStart;o.body.setVelocityX(-1*h)}spawnMonster(){this.monster=this.physics.add.sprite(1600,100,"monster"),this.monster.setGravityY(5e3),this.monster.isHit=!1,s.gameSpeedStart<2e3?this.monster.setVelocityX(s.gameSpeedStart*(-1*t.Math.Between(1,1.5))):this.monster.setVelocityX(-1*s.gameSpeedStart%2e3),this.monster.soundPlayed=!1,this.monster.setDepth(2),this.monster.body.setSize(116,140),this.monster.body.setOffset(70,116),this.monster.anims.play("exist"),this.monsterGroup.add(this.monster),this.monster.flipX=!0,this.physics.add.collider(this.player,this.monster,(()=>{this.monster.isHit||(this.monster.isHit=!0,this.monsterhits+=1,this.player.health>=1&&this.player.healthyscore>0||this.player.health>1&&this.player.healthyscore>=0?(this.player.health=1,this.player.healthyscore=0,this.flicker()):1==this.player.healt&&this.player.healtyscroe>0?(this.player.healthyscore=0,this.flicker()):this.player.health=0),this.monster.destroy()}),null,this)}flicker(){this.tweens.add({targets:this.player,alpha:{from:1,to:0},duration:100,ease:"Linear",repeat:5,yoyo:!0})}}class o extends e.Scene{constructor(){super("GameOver")}init(e){this.score=e.score||0}create(){this.cameras.main.setBackgroundColor(16711680),this.add.image(512,384,"background").setAlpha(.5),this.add.text(512,200,"Game Over",{fontFamily:"Arial Black",fontSize:64,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.add.text(512,300,"Press any key to restart",{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5);const e=this.score;this.add.text(512,400,`Current Score: ${e}`,{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5);let t=localStorage.getItem("highscore");null===t&&(t=0),this.add.text(512,500,`Highscore: ${t}`,{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),setTimeout((()=>{this.input.keyboard.once("keydown",(()=>{this.scene.start("Game")}))}),3e3)}}class r extends e.Scene{constructor(){super("MainMenu")}create(){this.add.image(512,384,"background"),this.add.image(512,300,"logo"),this.sound.add("intro",{volume:.5,loop:!0}).play(),this.add.text(512,10,"Created by Francesco Lanthaler, Marc Wittkowski and Lea Etzlinger",{fontFamily:"Arial Black",fontSize:12,color:"#000000",align:"center"}).setOrigin(.5,0),this.add.text(512,460,"Press any Key to Start",{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5).setOrigin(.5,-.1);const e=["Collect fruits and vegetables to earn lives.","Avoid the junk food.","Don't get caught by Ronald the Clown.","Press spacebar to jump, twice to double-jump."],t=(1024-(10*Math.max(...e.map((e=>e.length)))+15+50))/2;e.forEach(((e,a)=>{this.add.image(t+7.5,630+30*a+10,"arrow",0).setOrigin(.5,.5).setDisplaySize(15,15),this.add.text(t+15+20,630+30*a,e,{fontFamily:"Arial Black",fontSize:20,color:"#000000",align:"left"}).setOrigin(0,0)})),this.input.keyboard.once("keydown",(()=>{this.sound.stopByKey("intro"),this.scene.start("Game"),this.sound.add("intro",{volume:.5,loop:!0}).play()}))}}class h extends e.Scene{constructor(){super("Preloader")}init(){this.add.image(512,384,"background"),this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const e=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",(t=>{e.width=4+460*t}))}preload(){this.load.setPath("assets"),this.load.image("logo","veggy_sprint_logo.png"),this.load.spritesheet("player","player.png",{frameWidth:128,frameHeight:128}),this.load.image("ground_1","ground_1.png"),this.load.image("ground_2","ground_2.png"),this.load.image("ground_3","ground_3.png"),this.load.image("ground_4","ground_4.png"),this.load.image("apple","./food/apple.png"),this.load.image("aubergine","./food/aubergine.png"),this.load.image("avocado","./food/avocado.png"),this.load.image("birne","./food/birne.png"),this.load.image("brocolli","./food/brocolli.png"),this.load.image("burger","./food/burger.png"),this.load.image("carrot","./food/carrot.png"),this.load.image("cookie","./food/cookie.png"),this.load.image("doughnut","./food/doughnut.png"),this.load.image("icecream","./food/icecream.png"),this.load.image("orange","./food/orange.png"),this.load.image("pizza","./food/pizza.png"),this.load.image("pommes","./food/pommes.png"),this.load.image("strawberry","./food/strawberry.png"),this.load.image("heart","heart.png"),this.load.image("arrow","list_arrow.png"),this.load.spritesheet("monster","monster_sprite.png",{frameWidth:256,frameHeight:256}),this.load.audio("squeaky","./sounds/squeakytoy.mp3"),this.load.audio("intro","./sounds/mainmenu.mp3"),this.load.audio("gameover","./sounds/death.mp3"),this.load.audio("extralife","./sounds/extralife.mp3"),this.load.audio("eat","./sounds/eat.mp3"),this.load.audio("takedamage","./sounds/takedamage.mp3"),this.load.audio("laughter","./sounds/clown_laught.mp3"),this.load.audio("setback","./sounds/setback.mp3")}create(){this.scene.start("MainMenu")}}const l={type:Phaser.AUTO,width:1024,height:768,parent:"game-container",backgroundColor:"#028af8",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},scene:[a,h,r,i,o],physics:{default:"arcade",arcade:{},fps:{min:60,target:60,forceSetTimeOut:!0}}};new Phaser.Game(l);
